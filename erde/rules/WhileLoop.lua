local constants = require('erde.constants')

-- -----------------------------------------------------------------------------
-- WhileLoop
-- -----------------------------------------------------------------------------

local WhileLoop = {}

-- -----------------------------------------------------------------------------
-- Parse
-- -----------------------------------------------------------------------------

function WhileLoop.parse(ctx)
  if not ctx:branchWord('while') then
    ctx:throwExpected('while')
  end

  return {
    cond = ctx:Expr(),
    body = ctx:Surround('{', '}', ctx.Block),
  }
end

-- -----------------------------------------------------------------------------
-- Compile
-- -----------------------------------------------------------------------------

function WhileLoop.compile(ctx, node)
  -- TODO
end

-- -----------------------------------------------------------------------------
-- Return
-- -----------------------------------------------------------------------------

return WhileLoop
