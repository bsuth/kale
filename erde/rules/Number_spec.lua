-- -----------------------------------------------------------------------------
-- Parse
-- -----------------------------------------------------------------------------

describe('Number.parse', function()
  spec('rule', function()
    assert.are.equal('Number', parse.Number('0').rule)
  end)

  spec('integer', function()
    assert.are.equal('9', parse.Number('9').value)
    assert.are.equal('43', parse.Number('43').value)
  end)

  spec('hex', function()
    assert.are.equal('0x4', parse.Number('0x4').value)
    assert.are.equal('0xd', parse.Number('0xd').value)
    assert.are.equal('0Xf', parse.Number('0Xf').value)
    assert.are.equal('0xa8F', parse.Number('0xa8F').value)
    assert.are.equal('0xfp2', parse.Number('0xfp2').value)
    assert.are.equal('0xfP2', parse.Number('0xfP2').value)
    assert.are.equal('0xfp+2', parse.Number('0xfp+2').value)
    assert.are.equal('0xfp-2', parse.Number('0xfp-2').value)
    assert.has_error(function()
      parse.Number('x3')
    end)
    assert.has_error(function()
      parse.Number('0x')
    end)
    assert.has_error(function()
      parse.Number('0xg')
    end)
    assert.has_error(function()
      parse.Number('0xfp+')
    end)
    assert.has_error(function()
      parse.Number('0xfp-')
    end)
    assert.has_error(function()
      parse.Number('0xfpa')
    end)
  end)

  spec('floats', function()
    assert.are.equal('.34', parse.Number('.34').value)
    assert.are.equal('0.3', parse.Number('0.3').value)
    assert.are.equal('10.33', parse.Number('10.33').value)
    assert.has_error(function()
      parse.Number('4.')
    end)
  end)

  spec('exponents', function()
    assert.are.equal('9e2', parse.Number('9e2').value)
    assert.are.equal('9.2E21', parse.Number('9.2E21').value)
    assert.are.equal('9e+2', parse.Number('9e+2').value)
    assert.are.equal('.8e-2', parse.Number('.8e-2').value)
    assert.has_error(function()
      parse.Number('9e')
    end)
    assert.has_error(function()
      parse.Number('9e+')
    end)
    assert.has_error(function()
      parse.Number('9e-')
    end)
    assert.has_error(function()
      parse.Number('e2')
    end)
  end)
end)

-- -----------------------------------------------------------------------------
-- Compile
-- -----------------------------------------------------------------------------

describe('Number.compile', function()
  -- TODO
end)
